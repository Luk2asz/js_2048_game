{"version":3,"sources":["scripts/main.js"],"names":["button","document","querySelector","message","lose","win","rows","querySelectorAll","allCells","score","buttonClicked","gameOver","scoreValue","isGameOver","i","j","children","textContent","checkCell","classList","remove","newCell","x","xPosition","Math","floor","random","yPosition","cells","twoOrFour","classForCell","reset","add","forEach","cell","contains","sortCellsY","array","index","y","canMove","indexCellToCheck","nextCell","Number","sortCellsX","row","addEventListener","e","key"],"mappings":"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","file":"main.815c14df.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst button = document.querySelector('.button');\nconst message = document.querySelector('.message-start');\nconst lose = document.querySelector('.message-lose');\nconst win = document.querySelector('.message-win');\nconst rows = document.querySelectorAll('tr');\nconst allCells = document.querySelectorAll('td');\nconst score = document.querySelector('.game-score');\nlet buttonClicked = false;\nlet gameOver = false;\nlet scoreValue = 0;\n\nbutton.addEventListener('click', () => {\n  buttonClicked = true;\n  message.classList.add('hidden');\n  reset();\n});\n\nfunction isGameOver() {\n  gameOver = true;\n\n  for (let i = 0; i < 4; i++) {\n    for (let j = 0; j < 4; j++) {\n      if (!rows[i].children[j].textContent) {\n        gameOver = false;\n        break;\n      }\n    }\n  }\n\n  if (gameOver === true) {\n    for (let i = 0; i < 4; i++) {\n      for (let j = 0; j < 3; j++) {\n        const checkCell = rows[i].children[j].textContent;\n        const nextCell = rows[i].children[j + 1].textContent;\n\n        if (checkCell === nextCell) {\n          gameOver = false;\n          break;\n        }\n      }\n    }\n  }\n\n  if (gameOver === true) {\n    for (let i = 0; i < 3; i++) {\n      for (let j = 0; j < 4; j++) {\n        const checkCell = rows[i].children[j].textContent;\n        const nextCell = rows[i + 1].children[j].textContent;\n\n        if (checkCell === nextCell) {\n          gameOver = false;\n          break;\n        }\n      }\n    }\n  }\n\n  if (gameOver === true) {\n    lose.classList.remove('hidden');\n  }\n}\n\nfunction newCell(x = 1) {\n  const xPosition = Math.floor(Math.random() * 4);\n  const yPosition = Math.floor(Math.random() * 4);\n\n  for (let i = 0; i < x; i++) {\n    if (!rows[xPosition].cells[yPosition].textContent) {\n      rows[xPosition].cells[yPosition].textContent = twoOrFour();\n      classForCell();\n      isGameOver();\n    } else {\n      newCell();\n    }\n  }\n}\n\nfunction twoOrFour() {\n  if (Math.random() <= 0.1) {\n    return 4;\n  } else {\n    return 2;\n  }\n}\n\nfunction reset() {\n  scoreValue = 0;\n  score.textContent = scoreValue;\n  win.classList.add('hidden');\n  lose.classList.add('hidden');\n  gameOver = false;\n\n  allCells.forEach((cell) => {\n    cell.textContent = '';\n  });\n  newCell(2);\n}\n\nfunction classForCell() {\n  allCells.forEach((cell) => {\n    if (!cell.classList.contains(`field-cell--${cell.textContent}`)) {\n      cell.classList.remove(...cell.classList);\n      cell.classList.add(`field-cell`);\n      cell.classList.add(`field-cell--${cell.textContent}`);\n    }\n  });\n}\n\ndocument.addEventListener('keydown', e => {\n  if (e.key === 'ArrowRight' && buttonClicked && !gameOver) {\n    sortCellsX(rows, 3, -1);\n  };\n\n  if (e.key === 'ArrowLeft' && buttonClicked && !gameOver) {\n    sortCellsX(rows, 0, 1);\n  };\n\n  if (e.key === 'ArrowUp' && buttonClicked && !gameOver) {\n    sortCellsY(rows, 0, 1);\n  };\n\n  if (e.key === 'ArrowDown' && buttonClicked && !gameOver) {\n    sortCellsY(rows, 3, -1);\n  };\n});\n\nfunction sortCellsY(array, index, y) {\n  if (!button.classList.contains('restart')) {\n    button.classList.add('restart');\n    button.textContent = 'Restart';\n    button.classList.remove('start');\n  }\n\n  let canMove = false;\n\n  for (let i = 0; i < 4; i++) {\n    let indexCellToCheck = index;\n\n    for (let j = index; j !== 3 - index; j += y) {\n      const checkCell = array[indexCellToCheck].children[i].textContent;\n      const nextCell = array[j + y].children[i].textContent;\n\n      if (!checkCell\n       && nextCell) {\n        array[indexCellToCheck].children[i].textContent = nextCell;\n        array[j + y].children[i].textContent = '';\n        canMove = true;\n      } else if (checkCell !== nextCell && nextCell) {\n        if (indexCellToCheck !== j) {\n          array[indexCellToCheck + y].children[i].textContent = nextCell;\n          array[j + y].children[i].textContent = '';\n          canMove = true;\n        }\n        indexCellToCheck += y;\n      } else if (checkCell === nextCell && nextCell) {\n        array[indexCellToCheck].children[i].textContent = Number(nextCell) * 2;\n        array[j + y].children[i].textContent = '';\n        scoreValue += Number(array[indexCellToCheck].children[i].textContent);\n        score.textContent = scoreValue;\n\n        if (Number(array[indexCellToCheck].children[i].textContent) === 2048) {\n          win.classList.remove('hidden');\n        }\n        indexCellToCheck += y;\n        canMove = true;\n      }\n    }\n  }\n\n  if (canMove) {\n    newCell();\n  }\n  classForCell();\n};\n\nfunction sortCellsX(array, index = 3, x = -1) {\n  if (!button.classList.contains('restart')) {\n    button.classList.add('restart');\n    button.textContent = 'Restart';\n    button.classList.remove('start');\n  }\n\n  let canMove = false;\n\n  array.forEach(row => {\n    const cells = row.querySelectorAll('td');\n\n    let indexCellToCheck = index;\n\n    for (let i = index; i !== 3 - index; i += x) {\n      const checkCell = cells[indexCellToCheck].textContent;\n      const nextCell = cells[i + x].textContent;\n\n      if (!checkCell && nextCell) {\n        cells[indexCellToCheck].textContent = nextCell;\n        cells[i + x].textContent = '';\n        canMove = true;\n      } else if (checkCell !== nextCell && nextCell) {\n        if (indexCellToCheck !== i) {\n          cells[indexCellToCheck + x].textContent = nextCell;\n          cells[i + x].textContent = '';\n          canMove = true;\n        }\n        indexCellToCheck += x;\n      } else if (checkCell === nextCell && nextCell) {\n        cells[indexCellToCheck].textContent = Number(nextCell) * 2;\n        cells[i + x].textContent = '';\n        scoreValue += Number(cells[indexCellToCheck].textContent);\n        score.textContent = scoreValue;\n\n        if (Number(cells[indexCellToCheck].textContent) === 2048) {\n          win.classList.remove('hidden');\n        }\n        indexCellToCheck += x;\n        canMove = true;\n      }\n    }\n  });\n\n  if (canMove) {\n    newCell();\n  }\n  classForCell();\n}\n"]}